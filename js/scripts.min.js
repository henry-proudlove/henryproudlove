function clone(obj){var result={};for(var key in obj){result[key]=obj[key]}return result}(function(){var method;var noop=function(){};var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var length=methods.length;var console=window.console=window.console||{};while(length--){method=methods[length];if(!console[method]){console[method]=noop}}})();(function($){var $event=$.event,$special,resizeTimeout;$special=$event.special.debouncedresize={setup:function(){$(this).on("resize",$special.handler)},teardown:function(){$(this).off("resize",$special.handler)},handler:function(event,execAsap){var context=this,args=arguments,dispatch=function(){event.type="debouncedresize";$event.dispatch.apply(context,args)};if(resizeTimeout){clearTimeout(resizeTimeout)}execAsap?dispatch():resizeTimeout=setTimeout(dispatch,$special.threshold)},threshold:150}})(jQuery);(function(t,e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){module.exports=e(require("jquery"))}else{e(t.jQuery)}})(this,function(t){t.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:true,useTransitionEnd:false};var e=document.createElement("div");var n={};function i(t){if(t in e.style)return t;var n=["Moz","Webkit","O","ms"];var i=t.charAt(0).toUpperCase()+t.substr(1);for(var r=0;r<n.length;++r){var s=n[r]+i;if(s in e.style){return s}}}function r(){e.style[n.transform]="";e.style[n.transform]="rotateY(90deg)";return e.style[n.transform]!==""}var s=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;n.transition=i("transition");n.transitionDelay=i("transitionDelay");n.transform=i("transform");n.transformOrigin=i("transformOrigin");n.filter=i("Filter");n.transform3d=r();var a={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"};var o=n.transitionEnd=a[n.transition]||null;for(var u in n){if(n.hasOwnProperty(u)&&typeof t.support[u]==="undefined"){t.support[u]=n[u]}}e=null;t.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};t.cssHooks["transit:transform"]={get:function(e){return t(e).data("transform")||new f},set:function(e,i){var r=i;if(!(r instanceof f)){r=new f(r)}if(n.transform==="WebkitTransform"&&!s){e.style[n.transform]=r.toString(true)}else{e.style[n.transform]=r.toString()}t(e).data("transform",r)}};t.cssHooks.transform={set:t.cssHooks["transit:transform"].set};t.cssHooks.filter={get:function(t){return t.style[n.filter]},set:function(t,e){t.style[n.filter]=e}};if(t.fn.jquery<"1.8"){t.cssHooks.transformOrigin={get:function(t){return t.style[n.transformOrigin]},set:function(t,e){t.style[n.transformOrigin]=e}};t.cssHooks.transition={get:function(t){return t.style[n.transition]},set:function(t,e){t.style[n.transition]=e}}}p("scale");p("scaleX");p("scaleY");p("translate");p("rotate");p("rotateX");p("rotateY");p("rotate3d");p("perspective");p("skewX");p("skewY");p("x",true);p("y",true);function f(t){if(typeof t==="string"){this.parse(t)}return this}f.prototype={setFromString:function(t,e){var n=typeof e==="string"?e.split(","):e.constructor===Array?e:[e];n.unshift(t);f.prototype.set.apply(this,n)},set:function(t){var e=Array.prototype.slice.apply(arguments,[1]);if(this.setter[t]){this.setter[t].apply(this,e)}else{this[t]=e.join(",")}},get:function(t){if(this.getter[t]){return this.getter[t].apply(this)}else{return this[t]||0}},setter:{rotate:function(t){this.rotate=b(t,"deg")},rotateX:function(t){this.rotateX=b(t,"deg")},rotateY:function(t){this.rotateY=b(t,"deg")},scale:function(t,e){if(e===undefined){e=t}this.scale=t+","+e},skewX:function(t){this.skewX=b(t,"deg")},skewY:function(t){this.skewY=b(t,"deg")},perspective:function(t){this.perspective=b(t,"px")},x:function(t){this.set("translate",t,null)},y:function(t){this.set("translate",null,t)},translate:function(t,e){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(t!==null&&t!==undefined){this._translateX=b(t,"px")}if(e!==null&&e!==undefined){this._translateY=b(e,"px")}this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var t=(this.scale||"1,1").split(",");if(t[0]){t[0]=parseFloat(t[0])}if(t[1]){t[1]=parseFloat(t[1])}return t[0]===t[1]?t[0]:t},rotate3d:function(){var t=(this.rotate3d||"0,0,0,0deg").split(",");for(var e=0;e<=3;++e){if(t[e]){t[e]=parseFloat(t[e])}}if(t[3]){t[3]=b(t[3],"deg")}return t}},parse:function(t){var e=this;t.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,n,i){e.setFromString(n,i)})},toString:function(t){var e=[];for(var i in this){if(this.hasOwnProperty(i)){if(!n.transform3d&&(i==="rotateX"||i==="rotateY"||i==="perspective"||i==="transformOrigin")){continue}if(i[0]!=="_"){if(t&&i==="scale"){e.push(i+"3d("+this[i]+",1)")}else if(t&&i==="translate"){e.push(i+"3d("+this[i]+",0)")}else{e.push(i+"("+this[i]+")")}}}}return e.join(" ")}};function c(t,e,n){if(e===true){t.queue(n)}else if(e){t.queue(e,n)}else{t.each(function(){n.call(this)})}}function l(e){var i=[];t.each(e,function(e){e=t.camelCase(e);e=t.transit.propertyMap[e]||t.cssProps[e]||e;e=h(e);if(n[e])e=h(n[e]);if(t.inArray(e,i)===-1){i.push(e)}});return i}function d(e,n,i,r){var s=l(e);if(t.cssEase[i]){i=t.cssEase[i]}var a=""+y(n)+" "+i;if(parseInt(r,10)>0){a+=" "+y(r)}var o=[];t.each(s,function(t,e){o.push(e+" "+a)});return o.join(", ")}t.fn.transition=t.fn.transit=function(e,i,r,s){var a=this;var u=0;var f=true;var l=t.extend(true,{},e);if(typeof i==="function"){s=i;i=undefined}if(typeof i==="object"){r=i.easing;u=i.delay||0;f=typeof i.queue==="undefined"?true:i.queue;s=i.complete;i=i.duration}if(typeof r==="function"){s=r;r=undefined}if(typeof l.easing!=="undefined"){r=l.easing;delete l.easing}if(typeof l.duration!=="undefined"){i=l.duration;delete l.duration}if(typeof l.complete!=="undefined"){s=l.complete;delete l.complete}if(typeof l.queue!=="undefined"){f=l.queue;delete l.queue}if(typeof l.delay!=="undefined"){u=l.delay;delete l.delay}if(typeof i==="undefined"){i=t.fx.speeds._default}if(typeof r==="undefined"){r=t.cssEase._default}i=y(i);var p=d(l,i,r,u);var h=t.transit.enabled&&n.transition;var b=h?parseInt(i,10)+parseInt(u,10):0;if(b===0){var g=function(t){a.css(l);if(s){s.apply(a)}if(t){t()}};c(a,f,g);return a}var m={};var v=function(e){var i=false;var r=function(){if(i){a.unbind(o,r)}if(b>0){a.each(function(){this.style[n.transition]=m[this]||null})}if(typeof s==="function"){s.apply(a)}if(typeof e==="function"){e()}};if(b>0&&o&&t.transit.useTransitionEnd){i=true;a.bind(o,r)}else{window.setTimeout(r,b)}a.each(function(){if(b>0){this.style[n.transition]=p}t(this).css(l)})};var z=function(t){this.offsetWidth;v(t)};c(a,f,z);return this};function p(e,i){if(!i){t.cssNumber[e]=true}t.transit.propertyMap[e]=n.transform;t.cssHooks[e]={get:function(n){var i=t(n).css("transit:transform");return i.get(e)},set:function(n,i){var r=t(n).css("transit:transform");r.setFromString(e,i);t(n).css({"transit:transform":r})}}}function h(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function b(t,e){if(typeof t==="string"&&!t.match(/^[\-0-9\.]+$/)){return t}else{return""+t+e}}function y(e){var n=e;if(typeof n==="string"&&!n.match(/^[\-0-9\.]+/)){n=t.fx.speeds[n]||t.fx.speeds._default}return b(n,"ms")}t.transit.getTransitionValue=d;return t});(function($){"use strict";$.fn.fitVids=function(options){var settings={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var head=document.head||document.getElementsByTagName("head")[0];var css=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}";var div=document.createElement("div");div.innerHTML='<p>x</p><style id="fit-vids-style">'+css+"</style>";head.appendChild(div.childNodes[1])}if(options){$.extend(settings,options)}return this.each(function(){var selectors=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];if(settings.customSelector){selectors.push(settings.customSelector)}var ignoreList=".fitvidsignore";if(settings.ignore){ignoreList=ignoreList+", "+settings.ignore}var $allVideos=$(this).find(selectors.join(","));$allVideos=$allVideos.not("object object");$allVideos=$allVideos.not(ignoreList);$allVideos.each(function(count){var $this=$(this);if($this.parents(ignoreList).length>0){return}if(this.tagName.toLowerCase()==="embed"&&$this.parent("object").length||$this.parent(".fluid-width-video-wrapper").length){return}if(!$this.css("height")&&!$this.css("width")&&(isNaN($this.attr("height"))||isNaN($this.attr("width")))){$this.attr("height",9);$this.attr("width",16)}var height=this.tagName.toLowerCase()==="object"||$this.attr("height")&&!isNaN(parseInt($this.attr("height"),10))?parseInt($this.attr("height"),10):$this.height(),width=!isNaN(parseInt($this.attr("width"),10))?parseInt($this.attr("width"),10):$this.width(),aspectRatio=height/width;if(!$this.attr("id")){var videoID="fitvid"+count;$this.attr("id",videoID)}$this.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",aspectRatio*100+"%");$this.removeAttr("height").removeAttr("width")})})}})(window.jQuery||window.Zepto);!function(a,b){a.lazySizes=b(a,a.document),"function"==typeof define&&define.amd&&define(a.lazySizes)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d=b.documentElement,e=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],g=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");return a.className.match(c)&&c},h=function(a,b){g(a,b)||(a.className+=" "+b)},i=function(a,b){var c;(c=g(a,b))&&(a.className=a.className.replace(c," "))},j=function(a,b,c){var d=c?"addEventListener":"removeEventListener";c&&j(a,b),f.forEach(function(c){a[d](c,b)})},k=function(a,c,d,e,f){var g=b.createEvent("Event");return g.initEvent(c,!e,!f),g.details=d||{},a.dispatchEvent(g),g},l=function(b,d){var e;a.HTMLPictureElement||((e=a.picturefill||a.respimage||c.polyfill)?e({reevaluate:!0,reparse:!0,elements:[b]}):d&&d.src&&(b.src=d.src))},m=function(a,b){return getComputedStyle(a,null)[b]},n=function(a,b){for(var d=a.offsetWidth;d<c.minSize&&b&&!a._lazysizesWidth;)d=b.offsetWidth,b=b.parentNode;return d},o=function(a){var c,d,e=function(){c&&(c=!1,a())},f=function(){clearInterval(d),b.hidden||(e(),d=setInterval(e,51))};return b.addEventListener("visibilitychange",f),f(),function(a){c=!0,a===!0&&e()}},p=function(){var f,n,r,s,t,u,v,w,x,y,z,A=a.HTMLPictureElement&&navigator.userAgent.match(/hrome\/(\d+)/)&&40==RegExp.$1,B=/^img$/i,C=/^iframe$/i,D="onscroll"in a,E=-2,F=E,G=E,H=E,I=0,J=0,K=0,L=function(a){J--,a&&a.target&&j(a.target,L),(!a||0>J||!a.target)&&(J=0)},M=function(a,b){var c,d=a,e="hidden"!=m(a,"visibility");for(w-=b,z+=b,x-=b,y+=b;e&&(d=d.offsetParent);)e=s&&2>J||(m(d,"opacity")||1)>0,e&&"visible"!=m(d,"overflow")&&(c=d.getBoundingClientRect(),e=y>c.left-1&&x<c.right+1&&z>c.top-1&&w<c.bottom+1);return e},N=function(){var a,b,d,e,g,h,i,j,k,l=n.length;if(l&&p.m){for(b=Date.now(),f||S(),a=K;l>a;a++,K++)if(n[a]&&!n[a]._lazyRace)if(D){if((j=n[a].getAttribute("data-expand"))&&(h=1*j)||(h=H),!(J>6&&(!j||"src"in n[a])))if(h>E&&(p.m<2||J>3)&&(h=E),k!==h&&(u=innerWidth+h,v=innerHeight+h,i=-1*h,k=h),d=n[a].getBoundingClientRect(),(z=d.bottom)>=i&&(w=d.top)<=v&&(y=d.right)>=i&&(x=d.left)<=u&&(z||y||x||w)&&(s&&G>H&&3>J&&4>I&&!j||M(n[a],h)))K--,b+=2,R(n[a]),g=!0;else{if(Date.now()-b>3)return K++,void O();!g&&s&&!e&&3>J&&4>I&&(r[0]||c.preloadAfterLoad)&&(r[0]||!j&&(z||y||x||w||"auto"!=n[a].getAttribute(c.sizesAttr)))&&(e=r[0]||n[a])}}else R(n[a]);K=0,I++,G>H&&2>J&&I>5&&p.m>2?(H=G,I=0,O()):H=H!=F&&p.m>1&&I>4?F:E,e&&!g&&R(e)}},O=o(N),P=function(a){h(a.target,c.loadedClass),i(a.target,c.loadingClass),j(a.target,P)},Q=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.setAttribute("src",b)}},R=function(a,b){var d,f,m,n,o,p,r,u,v,w,x,y=a.currentSrc||a.src,z=B.test(a.nodeName),D=a.getAttribute(c.sizesAttr)||a.getAttribute("sizes"),E="auto"==D;if(!E&&s||!z||!y||a.complete||g(a,c.errorClass)){if(a._lazyRace=!0,!(v=k(a,"lazybeforeunveil",{force:!!b})).defaultPrevented){if(D&&(E?q.updateElem(a,!0):a.setAttribute("sizes",D)),p=a.getAttribute(c.srcsetAttr),o=a.getAttribute(c.srcAttr),z&&(r=a.parentNode,u=e.test(r.nodeName||"")),w=v.details.firesLoad||"src"in a&&(p||o||u),w&&(J++,j(a,L,!0),clearTimeout(t),t=setTimeout(L,3e3)),u)for(d=r.getElementsByTagName("source"),f=0,m=d.length;m>f;f++)(x=c.customMedia[d[f].getAttribute("data-media")||d[f].getAttribute("media")])&&d[f].setAttribute("media",x),n=d[f].getAttribute(c.srcsetAttr),n&&d[f].setAttribute("srcset",n);p?(a.setAttribute("srcset",p),A&&D&&a.removeAttribute("src")):o&&(C.test(a.nodeName)?Q(a,o):a.setAttribute("src",o)),h(a,c.loadingClass),j(a,P,!0)}setTimeout(function(){a._lazyRace&&delete a._lazyRace,"auto"==D&&h(a,c.autosizesClass),(p||u)&&l(a,{src:o}),i(a,c.lazyClass),(!w||a.complete&&y==(a.currentSrc||a.src))&&(w&&L(v),P(v)),a=null})}},S=function(){f||(F=Math.max(Math.min(c.expand||140,300),9),G=4*F),f=!0},T=function(){p.m=3},U=function(){s=!0,T(),O(!0)};return{_i:function(){n=b.getElementsByClassName(c.lazyClass),r=b.getElementsByClassName(c.lazyClass+" "+c.preloadClass),c.scroll&&addEventListener("scroll",O,!0),addEventListener("resize",function(){f=!1,O()},!0),a.MutationObserver?new MutationObserver(O).observe(d,{childList:!0,subtree:!0,attributes:!0}):(d.addEventListener("DOMNodeInserted",O,!0),d.addEventListener("DOMAttrModified",O,!0),setInterval(O,3e3)),addEventListener("hashchange",O,!0),["transitionstart","transitionend","load","focus","mouseover","animationend","click"].forEach(function(a){b.addEventListener(a,O,!0)}),(s=/d$|^c/.test(b.readyState))||(addEventListener("load",U),b.addEventListener("DOMContentLoaded",O)),setTimeout(T,777),O(n.length>0)},m:1,checkElems:O,unveil:R}}(),q=function(){var a,d=function(a,b){var c,d,f,g,h,i=a.parentNode;if(i&&(c=n(a,i),h=k(a,"lazybeforesizes",{width:c,dataAttr:!!b}),!h.defaultPrevented&&(c=h.details.width,c&&c!==a._lazysizesWidth))){if(a._lazysizesWidth=c,c+="px",a.setAttribute("sizes",c),e.test(i.nodeName||""))for(d=i.getElementsByTagName("source"),f=0,g=d.length;g>f;f++)d[f].setAttribute("sizes",c);h.details.dataAttr||l(a,h.details)}},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)d(a[b])},g=o(f);return{_i:function(){a=b.getElementsByClassName(c.autosizesClass),addEventListener("resize",g)},checkElems:g,updateElem:d}}(),r=function(){r.i||(r.i=!0,q._i(),p._i())};return function(){var b,d={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",scroll:!0,autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:50,customMedia:{},init:!0};c=a.lazySizesConfig||{};for(b in d)b in c||(c[b]=d[b]);a.lazySizesConfig=c,setTimeout(function(){c.init&&r()})}(),{cfg:c,autoSizer:q,loader:p,init:r,uP:l,aC:h,rC:i,hC:g,fire:k,gW:n}}});function whichTransitionEvent(){var t,el=document.createElement("fakeelement");var transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions){if(el.style[t]!==undefined){return transitions[t]}}}transitionEnd=whichTransitionEvent();function whichAnimationEvent(){var t,el=document.createElement("fakeelement");var transitions={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in transitions){if(el.style[t]!==undefined){return transitions[t]}}}animationEnd=whichAnimationEvent();jQuery.easing["jswing"]=jQuery.easing["swing"];jQuery.extend(jQuery.easing,{easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b}});window.onload=function(){if(/iP(hone|ad)/.test(window.navigator.userAgent)){document.body.addEventListener("touchstart",function(){},false)}};!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}(function($){var dispatch=$.event.dispatch||$.event.handle,special=$.event.special,uid1="D"+ +new Date,uid2="D"+(+new Date+1);special.scrollstart={setup:function(data){var timer,_data=$.extend({latency:special.scrollstop.latency},data),handler=function(evt){var _self=this,_args=arguments;timer?clearTimeout(timer):(evt.type="scrollstart",dispatch.apply(_self,_args)),timer=setTimeout(function(){timer=null},_data.latency)};$(this).bind("scroll",handler).data(uid1,handler)},teardown:function(){$(this).unbind("scroll",$(this).data(uid1))}},special.scrollstop={latency:250,setup:function(data){var timer,_data=$.extend({latency:special.scrollstop.latency},data),handler=function(evt){var _self=this,_args=arguments;timer&&clearTimeout(timer),timer=setTimeout(function(){timer=null,evt.type="scrollstop",dispatch.apply(_self,_args)},_data.latency)};$(this).bind("scroll",handler).data(uid2,handler)},teardown:function(){$(this).unbind("scroll",$(this).data(uid2))}}});Function.prototype.debounce=function(milliseconds,context){var baseFunction=this,timer=null,wait=milliseconds;return function(){var self=context||this,args=arguments;function complete(){baseFunction.apply(self,args);timer=null}if(timer){clearTimeout(timer)}timer=setTimeout(complete,wait)}};$(document).ready(function(e){var noop=function(){};var $bodyHTML=$("body, html");var linkContainers=".menu-wrapper , .content-wrapper";var $menCnt=$(".menu-container");var $siteLnks=$(".menu-wrapper a");var $menuBtn=$(".menu-button a");var $title=$(".site-title a");var $cycle=null;var uriStem=$("body[data-uri-stem]").length>0?$("body").data("uri-stem"):"/";function getHeader(event){if(Modernizr.cssanimations&&Modernizr.inlinesvg&&Modernizr.svgclippaths){var inline=".header-inline";var stacked=".header-stacked";var m=$(window).width()<769;if(m&&$(stacked).length<1){$title.load(uriStem+"img/header-svg/HenryProudlove-stacked.svg",function(){introAnim(stacked)})}else if(!m&&$(inline).length<1){$title.load(uriStem+"img//header-svg/HenryProudlove-inline.svg",function(){introAnim(inline)})}}else{$title.addClass("header-png");setTimeout(function(){},1e3)}}$(window).on("debouncedresize",function(e){getHeader()});function introAnim(svg){$svg=$(svg);if($("img").length<1||firstimg==true){hideLoader()}else{hideLoader()}function hideLoader(){window.setTimeout(function(){$(document).trigger("showpage")},2e3)}}$(document).on("showpage",function(e){$("#container").addClass("active");$(window).trigger("cycle-activate");$(".site-title a").removeAttr("style")});var activePage={page:null,caller:false,activeLink:null,sub:false,locate:function(url,caller,callBack){updateLocation(url);$(linkContainers).find("a.active").removeClass("active");this.page=url;this.caller=caller;this.getSection(url);callBack=callBack||noop;callBack()},getSection:function(url){secs=$(".site-links a").map(function(){return $(this).attr("href").replace(/\//g,"\\/")}).get().join("|");patt=new RegExp("("+secs+")(?=\\/|$)","g");var section=url.match(patt);if(section==null){this.sectionID=null;this.activeLink=$('a[href="'+url+'"]').addClass("active")}else{section=section[0];this.sectionID=section.replace(/\/|henryproudlove/g,"");if(url==section||url==section+"/"){this.sub=false}else{this.sub=true}this.activeLink=$('a[href="'+section+'"]').addClass("active")}},isCaseStudy:function(){if(this.sectionID=="work"&&this.sub==true){return true}else{return false}},exit:function(callBack){window.clearTimeout(cycleTimer);window.clearTimeout(idleTimer);cycleTimer=null;$(".menu-wrapper").removeAttr("style");var id=this.sectionID;var cs=this.isCaseStudy();if(!cs){if(id=="about"||id=="contact"){acHeadAnimateKill()}else if(id==null){cycleKill()}}else{slideshowKill();csHeadAnimateKill()}callBack=callBack||noop;callBack()},enter:function(){var id=this.sectionID;var cs=this.isCaseStudy();if(!cs){if(id=="about"||id=="contact"){acScrollTop()}else if(id==null){cycleInit()}backBtn.down()}else{projectSlideshow();csHeadAnimate();packeryInit()}$(window).trigger("debouncedresize");backBtn.up();idleTimeout()}};$(document).on("navChange",function(e,url,caller){cyclePause();navigate.init(url,caller);if($(caller).hasClass("menu-wrapper"))$menCnt.add($menuBtn).toggleClass("active")});$(linkContainers).on("click",'a:not([href^="http://"])',function(e){var url=$(this).attr("href");var loc=activePage.page;if(url!=loc){$(document).trigger("navChange",[url,e.delegateTarget])}e.preventDefault()});function updateLocation(url){var base=$('<base href="'+url+'">');$("head").append(base);history.pushState(null,null,url)}var popped="state"in window.history&&window.history.state!==null,initialURL=location.href;$(window).on("popstate",function(e){var initialPop=!popped&&location.href==initialURL;popped=true;if(!initialPop){$(document).trigger("navChange",[window.location.pathname,"back-forward"])}});var navigate={init:function(page,caller){$.ajax({url:page,dataType:"html",beforeSend:function(){$("#container").addClass("transition");navigate.loaderUp()},success:function(data){$(".content").addClass("outgoing");var $content=$(".content",$.parseHTML(data));$content.addClass("incoming").appendTo(".content-wrapper");$(".outgoing").children().on(transitionEnd,function(e){e.stopPropagation()}).parent().one(transitionEnd,function(e){activePage.exit(function(){activePage.locate(page,caller,function(){if(activePage.isCaseStudy()){$("body").attr("class",$content.data("name")+" project")}else{$("body").attr("class",$content.data("name"))}$(".outgoing").remove();window.scrollTo(0,0);$("#container").removeClass("transition");$content.removeClass("incoming").one(transitionEnd,function(){$(window).trigger("cycle-activate")});activePage.enter()})})})},error:function(){$('<div class="error"><div class="error-text">Sorry! Something went wrong :(</div></div>').appendTo("#container").on(animationEnd,function(){$(this).remove()});$("#container").removeClass("transition").one(transitionEnd,function(){$(window).trigger("cycle-stage")})}})},loader:$(".loader"),loaderInit:false,loaderUp:function(){if(!this.loaderInit){this.loader.addClass("active").removeClass("stop");this.loaderInit=true}else{this.loader.addClass("active").removeClass("stop")}}};var backBtn={el:$('<nav class="back-button-holder"><a class="back-button" href="#"><span class="fg-color trans">Back</span></a></nav>'),target:null,appended:false,getTarget:function(){return $(".site-links a.active").attr("href")},up:function(){switch(true){case activePage.isCaseStudy()&&!this.appended:this.el.find("a").addClass("active");this.el.appendTo(".main-header");this.appended=true;break;case activePage.isCaseStudy():this.el.find("a").addClass("active");break;default:this.el.find("a").removeClass("active")}},down:function(){}};backBtn.el.on("click",function(e){url=backBtn.getTarget();$(document).trigger("navChange",[url,e.target]);e.preventDefault()});$menuBtn.click(function(e){$(this).removeClass("active").siblings().addClass("active");if($(this).is(":first-child")){menuOpen()}else{closeMenu()}e.preventDefault()});function menuOpen(){$(".site-title").off(transitionEnd);cyclePause();$(".menu-wrapper").removeAttr("style");if(activePage.sectionID=="about"||activePage.sectionID=="contact"){acHeadAnimateKill()}$menCnt.addClass("active");$("body").addClass("menu")}function closeMenu(){if(activePage.sectionID==null){$(".site-title").on(transitionEnd,function(e){if(e.originalEvent.propertyName=="padding-bottom"){$("#container").addClass("cycle-active");$(this).off(transitionEnd).trigger("cycle-activate")}})}$menCnt.removeClass("active");$("body").removeClass("menu");if(activePage.sectionID=="about"||activePage.sectionID=="contact"){acScrollTop()}}$(window).on("keyup",function(e){if(e.keyCode==27&&$("body").hasClass("menu")){$menuBtn.filter(".active").removeClass("active").siblings().addClass("active");closeMenu()}else if(e.keyCode==13&&!$("body").hasClass("menu")){$menuBtn.filter(".active").removeClass("active").siblings().addClass("active");menuOpen()}});var video={};var slideshowHTML='<section class="slideshow-wrapper">							<nav class="slideshow-paging">								<div class="back-button-holder">									<a href="#" class="back-button active"><span class="fg-color trans">Next Image</span></a>								</div>								<div class="next-button-holder">									<a href="#" class="next-button active"><span class="fg-color trans">Previous Image</span></a>								</div>							</nav>							<nav class="slideshow-close">								<a href="#" class="active">									<span class="close">Close										<span class="first bar fg-color"></span>										<span class="second bar fg-color"></span>									</span>								</a>							</nav>						</section>';var videoSpinner='<svg version="1.1" class="video-spinner fg-color active trans" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"		 viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">		 <g id="spinner-holder" transform="translate(20,20)">			<g id="spinner">				<g id="spinner-left">					<path d="M0-17.3V-20c-11.1,0-20,8.9-20,20h2.7C-17.3-9.5-9.6-17.3,0-17.3z"/>				</g>				<g id="spinner-right">					<path d="M20,0h-2.7c0,9.6-7.8,17.3-17.3,17.3V20C11.1,20,20,11,20,0z"/>				</g>			</g>		</g>	</svg>';var slideshows={};function projectSlideshow(){var slideshowID=$("article.content").data("name")+"-slideshow";function videoController(slide,cmd){var vpfx="slide-video-";var x=cmd=="play"?true:false;thisVideo=$(slide).attr("id").substr(vpfx.length);if(video.hasOwnProperty(thisVideo)){video[thisVideo].api(cmd)}}var slidesobj=[];$.each($(".grid figure"),function(i){$(this).data("slideindex",i);$(this).hasClass("video")?slide=videoSlide($(this),i):slide=imageSlide($(this),i);slidesobj[i]=slide});if(!slideshows.hasOwnProperty(slideshowID)){$(slideshowHTML).attr("id",slideshowID).prependTo("body").append(slidesobj).cycle({slides:"figure",startingSlide:0,swipe:true,log:false,next:".slideshow-paging .next-button",prev:".slideshow-paging .back-button",paused:true,manualSpeed:200})}var $slideshowID=$("#"+slideshowID);slideshows[slideshowID]=$("#"+slideshowID);$("article.project .grid").on("click","figure",function(e){var cycleopts=$slideshowID.data("cycle.opts");var clicked=$(e.currentTarget).data("slideindex");if(clicked!=cycleopts.currSlide){$slideshowID.cycle("goto",clicked).on("cycle-after",function(){$(this).addClass("active")})}else{$slideshowID.trigger("cycle-show",[cycleopts,null,cycleopts.slides[cycleopts.currSlide]]).addClass("active")}$("body").addClass("slideshow")});function videoSlide(slide,index){var videoPath=slide.find("img").data("video");var videoId=slideshowID+"-video-"+index;var $vidcont=$('<figure id="slide-video-'+videoId+'" class="video">'+videoSpinner+"</figure>");$.ajax({url:"https://vimeo.com/api/oembed.json?url="+videoPath+"&api=true&player_id="+videoId+"&title=false&portrait=false&byline=false",success:function(data){var vidcont=$(".slideshow-wrapper").find("#slide-video-"+index);var iframe=$(data.html).wrap('<div class="lazyload center"></div>').parent().fitVids().appendTo($vidcont).addClass("active").find("iframe").attr("id",videoId)[0];var player=$f(iframe);player.addEvent("ready",function(){video[videoId]=player;$vidcont.find(".video-spinner").attr("class","video-spinner").on(transitionEnd,function(){$(this).remove()})})}});return $vidcont}function imageSlide(slide,index){imgClasses=slide.attr("class").split(/\s+/);slidefig='<figure id="slide-image-'+index+'" class="image"><div class="vertical-center"></div></figure>';slide=slide.clone().off("click").find("img").data("classes",imgClasses).removeAttr("srcset").attr("sizes","100vw").removeClass().addClass("lazyload");return $(slidefig).find("div").append(slide).parent()}$slideshowID.on("cycle-after cycle-show",function(e,opts,outgoing,incoming){var is=e.type;if(is=="cycle-after"&&$(outgoing).hasClass("image")){$(window).off("mousemove");$(outgoing).off("hoverspeed").find("img").css({top:"0","-webkit-transition-duration":"0","transition-duration":"0",cursor:"auto"})}else if(is=="cycle-after"&&$(outgoing).hasClass("video")){videoController(outgoing,"pause")}if($(incoming).hasClass("image")){var $img=$(incoming).find("img");var height=0;var imgHeight=0;var offset=0;var speed=0;var steps=3;var time=.67;var duration=0;$img.css({"transition-duration":"0.33s"});height=$(window).height();imgHeight=$img.height();offset=imgHeight-height;$(window).on("mousemove",function(e){if(imgHeight>height){var pos=e.clientY;var center=height/2;var xspeed=Math.round((pos-center)/center*steps)/steps;if(xspeed!=speed){speed=xspeed;$(incoming).trigger("hoverspeed",[speed])}}else{$img.removeAttr("style")}}).trigger("mousemove");$(incoming).on("hoverspeed",function(e,speed){switch(true){case speed<0:duration=time/Math.sin(speed*-1);$img.css({transform:"translate3d(0,"+offset/2+"px,0)","transition-duration":duration+"s"});$(".slideshow-wrapper").addClass("cursor-move-up").removeClass("cursor-move-down cursor-move");break;case speed>0:duration=time/Math.sin(speed);$img.css({transform:"translate3d(0,"+offset/2*-1+"px,0)","transition-duration":duration+"s"});$(".slideshow-wrapper").addClass("cursor-move-down").removeClass("cursor-move-up cursor-move");break;default:$img.css({transform:$img.css("transform"),"transition-duration":"0"});$(".slideshow-wrapper").addClass("cursor-move").removeClass("cursor-move-up cursor-move-down")}})}else{videoController(incoming,"play")}});$(document).on("click",".slideshow-close a",function(e){closeSlideshow();e.preventDefault()});$(document).keyup(function(e){if(e.keyCode==27){closeSlideshow()}});function closeSlideshow(){$slideshowID.removeClass("active");if($(".cycle-slide-active.video").length>0){videoController($(".cycle-slide-active")[0],"pause")}$(".slidesshow-wrapper").removeClass("cursor-move cursor-move-down cursor-move-up");var $img=$slideshowID.find(".cycle-slide-active img");var style=$img.css("transform");$img.attr("style",style);$(window).trigger("debouncedresize")}}function slideshowKill(){$("article.project .grid").off("click")}var $grid;var fitItems=[{project:"design-in-china",pairs:[[1,2],[5,6]]
},{project:"huawei",pairs:[[2,3],[4,5]]}];function packeryInit(){var $grid=$(".project .grid");var toFit;var y;$.each(fitItems,function(i){toPair=[];if($("body").hasClass(this.project)){$.each(this.pairs,function(i){var pair={};pair.el=[$grid.children().eq(this[0]).removeClass("width1"),$grid.children().eq(this[1]).removeClass("width1")];var h=0;$.each(pair.el,function(i){classes=this.attr("class");var hstr="height";var hp=classes.substring(classes.indexOf(hstr));h=parseInt(hp.substring(hstr.length))+h});pair.wrapper='<div class="box width1 height'+h+' pair"></div></div>';toPair.push(pair)});$.each(toPair,function(){$(this.el[0][0]).add(this.el[1][0]).wrapAll(this.wrapper)})}})}var csHeadAnim;var csTextAnim;var acHeadAnim;var scrolled=0;var acHeadObj={ok:false,go:true,init:function(){var ch=$(".content").height();var wh=$(window).height();if($("article.about, article.contact").length>0&&ch>wh){this.header=$(".menu-wrapper");this.h=this.header.height();this.d=ch-wh;this.o=this.h*-1;this.e=this.header.offset().top+this.h;this.ok=true}},reset:function(){var init=this.init;var reset=this.reset;acHead={ok:false,go:true,init:init,reset:reset}}};var acHead=clone(acHeadObj);function acHeadAnimPlay(){acHead.go=true;var x=scrolled/acHead.e;acHead.header.css({"transition-delay":"0",transition:"none",transform:"translate3d(0, "+Math.max(acHead.o*x,acHead.o)+"px, 0)",opacity:1-3*x})}function acHeadAnimStop(){if(acHead.go){acHead.go=false;acHead.header.css({transform:"translate3d("+acHead.o+"px)"});cancelAnimationFrame(acHeadAnim)}}var csHeadObj={ok:false,go:true,init:function(){if($("article.project").length>0){this.img=$("section.images > figure");this.header=$("article.project > header");this.client=this.header.find("h1");this.title=this.header.find("h2");this.d=this.img.height();this.o=this.client.height();this.e=this.img.height();if(!Modernizr.touchevents){this.client.add($title).add(this.title).css("transform","translate3d(0, 0, 0)")}this.img.css("background-color","#222");this.ok=true}}};var csHead=clone(csHeadObj);function csHeadAnimPlay(){if(!csHead.go){$("section.images .grid").removeClass("hover-fade")}csHead.go=true;var x=scrolled/csHead.e;var offset=csHead.o*-1;csHead.client.css({transform:"translate3d(0,"+Math.max(offset,offset*x)+"px,0)",opacity:1-x});csHead.title.css({transform:"translate3d(0,"+Math.max(offset,offset*x*1.5)+"px,0)",opacity:1-1.5*x});csHead.img.css({transform:"translate3d(0,"+x*100*-1+"px, 0)"});csHead.img.find(".pad").css("opacity",1-x*.75)}function csHeadAnimStop(){if(csHead.go){csHead.go=false;csHead.client.css({transform:"translate3d(0,"+csHead.o*-1+"px,0)",opacity:0});csHead.title.css({transform:"translate3d(0,"+csHead.o*-1*1.5+"px,0)",opacity:0});csHead.img.css({transform:"translate3d(0, -100px, 0)"});csHead.img.find(".pad").css("opacity",.25);cancelAnimationFrame(csHeadAnim);$("section.images .grid").addClass("hover-fade")}}var csTextObj={ok:false,go:true,init:function(){if($("article.project").length>0){this.wh=$(window).height();this.header=$("section.text header");this.client=this.header.find("h1");this.title=this.header.find("h2");this.o=60;this.s=this.header.offset().top-this.wh;var d=Math.min($(document).height()-this.wh,$("section.text").offset().top);this.e=d-this.s;this.ok=true;if(!Modernizr.touchevents){style={transform:"translate3d(0,"+this.o+"px,0)",opacity:0};this.client.css(style);this.title.css(style)}}}};var csText=clone(csTextObj);function csTextAnimPlay(){csText.go=true;var x=(scrolled-csText.s)/csText.e;var offset=csText.o*-1+csText.o*x;csText.client.css({transform:"translate3d(0,"+Math.min(offset,0)+"px,0)",opacity:Math.min(1,x*1.5)});csText.title.css({transform:"translate3d(0,"+Math.min(offset*1.33,0)+"px,0)",opacity:Math.min(1,x)})}function csTextAnimStop(){if(csText.go){csText.go=false;csText.client.css({transform:"translate3d(0,"+csText.o*-1+"px,0)",opacity:0});csText.title.css({transform:"translate3d(0,"+csText.o*-1+"px,0)",opacity:0});cancelAnimationFrame(csTextAnim)}}$(window).on("debouncedresize",function(e){acHead.init();csHead.init();csText.init()});function acScrollTop(){setTimeout(acScrollToTop,300);function acScrollToTop(){if($("body").scrollTop()>0){$bodyHTML.stop().animate({scrollTop:0},667,"easeOutCirc")}}$(".menu-wrapper").children().on(transitionEnd,function(e){e.stopPropagation()}).parent().on(transitionEnd,function(e){var prop=e.originalEvent.propertyName;if(prop=="transform"||prop=="-webkit-transform"||prop=="-ms-transform"){acHeadAnimate();$(this).off(transitionEnd)}})}function csHeadAnimate(){scrolled=$(this).scrollTop();if(!Modernizr.touchevents){csHeadAnim=requestAnimationFrame(csHeadAnimPlay);csTextAnim=requestAnimationFrame(csTextAnimPlay);$(window).on("scroll",function(e){scrolled=$(this).scrollTop();if(scrolled<=csHead.e){csHeadAnim=requestAnimationFrame(csHeadAnimPlay)}else if(csHead.go){csHeadAnim=requestAnimationFrame(csHeadAnimStop)}if(scrolled>csText.s){csTextAnim=requestAnimationFrame(csTextAnimPlay)}else if(csText.go&&csText.ok){csTextAnim=requestAnimationFrame(csTextAnimStop)}})}else{csHead.init();var showHide=false;var header=csHead.client.add(csHead.title).add(csHead.img);var imgh=csHead.img.height();$(window).on("scroll",function(e){scrolled=$(this).scrollTop();if(scrolled>imgh/2&&!showHide){header.addClass("touchanim hide").removeClass("show");showHide=true}else if(scrolled<=imgh/2&&showHide){header.addClass("show").removeClass("hide");showHide=false}})}}function acHeadAnimate(){acHead.init();var showHide=false;$(window).on("scroll",function(e){scrolled=$(this).scrollTop();if(scrolled>0&&scrolled<=acHead.e&&acHead.ok){acHeadAnim=requestAnimationFrame(acHeadAnimPlay)}else{acHeadAnim=requestAnimationFrame(acHeadAnimStop)}})}function csHeadAnimateKill(callBack){$(window).off("scroll scrollstart");csHeadAnim=null;csTextAnim=null;csHead=clone(csHeadObj);csText=clone(csTextObj)}function acHeadAnimateKill(){$(window).off("scroll");acHeadAnim=null;acHead=clone(acHeadObj)}var cycleSlides;var cycleOpts={speed:1e3,manualSpeed:1,slides:"> a",loader:true,pager:".cycle-pager",log:false,startingSlide:0,paused:true};var cycleTimer=null;var $autoCycle=null;function cycleInit(){$cycle=$("section.cycle");cycleSlides=$cycle.find("> a").each(function(i){$(this).data("slideindex",i)});$autoCycle=$cycle.clone().attr("id","cycle-auto-holder").addClass("filter").appendTo(".content").cycle(cycleOpts);var fade=$('<div class="fade"/>').appendTo("#cycle-scroll-holder");cyc.reset();cyc.wsize(cycleSlides.length);cyc.section=0;window.scrollTo(0,0);var firstRun=true;$(window).on("cycle-activate",function(e){if($("html:hover").length>0){cycleScrollInit()}else{cycleAuto()}$("#container").addClass("cycle-active");firstRun=false})}var cyc={w:$(window).height(),h:this.w/4,shift:this.w/2,pager:$(".cycle-pager"),wsize:function(slides){this.w=$(window).height();this.h=this.w/4;this.shift=this.w/2;$(".content").height(this.h*slides+(this.w-this.h));this.slideCount=slides},frame:function(scrolled){this.section=Math.round(scrolled/this.h);this.o=(scrolled/this.h-this.section)*2;curve=Math.pow(Math.abs(this.o),6);this.c=curve<.1?0:curve;this.speed=Math.abs(scrolled-this.pscroll);if(this.o<0){this.a=-1}else if(this.o>0){this.a=1}else{this.a=0}},reset:function(){this.section=0;this.psection=0;this.pscroll=0;this.speed=0;this.o=0;this.a=0;this.pa=0;this.c=0}};$(window).on("debouncedresize",function(){if($("#cycle-scroll-holder section.cycle").length>0){cyc.wsize(cycleSlides.length)}});function cycleScrollInit(){if($cycle!=null){cycleSwitchVisibility(cycleSlides[cyc.section],true);$("#container").addClass("cycle-scroll");cycleScroll();cycleScrolledTimeout()}}function cycleScrolledTimeout(){var idle=true;$(window).one("mousemove scrollstart",function(e){idle=false});cycleTimer=window.setTimeout(function(){if(idle&&!$("body").hasClass("menu")){cycleAuto()}else{cycleScrolledTimeout()}},4e3)}function cycleAuto(){$(window).off("scroll scrollstop scrollstart mousemove");$autoCycle.cycle("goto",cyc.section);$("#container").removeClass("cycle-scroll");cycleSlides.removeClass("cycle-slide-hidden cycle-slide-visible");$autoCycle.cycle("resume");clearCycleAuto()}function clearCycleAuto(){$(window).on("mousemove scrollstart",function(e){$(this).off("mousemove scrollstart");$autoCycle.cycle("pause");var currSection=$autoCycle.data("cycle.opts").currSlide;cyc.section=currSection;scrollto=cyc.section*cyc.h;window.scrollTo(0,scrollto);cycleScrollInit()})}var cycleAnim;function cycleScrollAnimPlay(){cyc.frame(scrolled);var n;if(cyc.o>0){n=1;moveSlide(-1);cycleFadeUp();moveNextBackSlide(1,"bottom");if(cyc.pa!=cyc.a){cycleSwitchVisibility(cycleSlides[cyc.section],true)}}else{n=-1;moveSlide(1);cycleFadeUp();moveNextBackSlide(-1,"top");if(cyc.pa!=cyc.a){cycleSwitchVisibility(cycleSlides[cyc.section],false)}}if(cyc.section!=cyc.psection){cyc.psection=cyc.section}cyc.pscroll=scrolled;cyc.pa=cyc.a}function moveSlide(d){var move=cyc.c*50*d;$(cycleSlides[cyc.section]).find("figure").css("transform","translate3d(0,"+move+"%,0)")}function moveNextBackSlide(n,p){if(p=="bottom"){var move=cyc.c*-25+75}else{var move=cyc.c*25-75}$(cycleSlides[cyc.section+n]).find("figure").css("transform","translate3d(0 ,"+move+"%, 0)")}function cycleFadeUp(){$(".fade").css("opacity",1-cyc.c)}function cycleSwitchVisibility(slide,fwd,loop){var a=cyc.a;$(slide).removeClass("cycle-slide-visible cycle-slide-hidden").addClass("cycle-slide-active");switch(true){case loop&&a>0:poop=$(cycleSlides[0]).removeClass("cycle-slide-hidden cycle-slide-active").addClass("cycle-slide-visible").add(slide);break;case a<0&&$(slide).data("slideindex")==0:poop=$(cycleSlides[cycleSlides.length-1]).addClass("cycle-slide-visible").add(slide);break;case fwd&&a>=0:poop=$(slide).next("a").removeClass("cycle-slide-hidden cycle-slide-active").addClass("cycle-slide-visible").add(slide);break;case fwd&&a<0:poop=$(slide).prev("a").removeClass("cycle-slide-hidden cycle-slide-active").addClass("cycle-slide-visible").add(slide);break;case!fwd&&a<0:poop=$(slide).prev("a").removeClass("cycle-slide-hidden cycle-slide-active").addClass("cycle-slide-visible").add(slide);break;case!fwd&&a>=0:poop=$(slide).next("a").removeClass("cycle-slide-hidden cycle-slide-active").addClass("cycle-slide-visible").add(slide);break}$(cycleSlides).not(poop).removeClass("cycle-slide-visible cycle-slide-active").addClass("cycle-slide-hidden")}function cycleKill(){if($cycle!=null&&$autoCycle!=null){cycleClear();$autoCycle.cycle("destroy");$("#container").removeClass("cycle-active cycle-scroll cycle-auto-transition");$autoCycle=null;$cycle=null;cycleSlides=null;cycleAnim=null;cyc.reset()}}function cycleClear(){$autoCycle.cycle("pause");$("#container").removeClass("cycle-active");window.clearTimeout(cycleTimer);$(window).off("scroll scrollstop scrollstart mousemove");window.clearTimeout(cycleTimer);cycleTimer=null}function cyclePause(){if($autoCycle!=null&&$cycle!=null){cycleClear()}}function cycleScroll(){var $pager=$(".cycle-pager").children();$(window).on("scroll",function(e){scrolled=$(this).scrollTop();if($cycle!=null){cycleAnim=requestAnimationFrame(cycleScrollAnimPlay)}}).trigger("scroll").on("scrollstop",{latency:333},function(e){cycleSnap()});function cycleSnap(){$(window).off("scrollstop");$bodyHTML.stop().animate({scrollTop:cyc.h*cyc.section},333,function(){$pagerActive=$($pager[cyc.section]);if(!$pagerActive.hasClass("cycle-pager-active")){$pagerActive.addClass("cycle-pager-active").siblings().removeClass("cycle-pager-active")}$(window).on("scrollstop",{latency:333},function(e){cycleSnap()})})}}window.lazySizesConfig={addClasses:true};var string="<style type='text/css'>\n	";var trans=Modernizr.prefixed("transform");if(trans=="WebkitTransform"){string+="			.filter{\n						filter: grayscale(1);\n						-webkit-filter: grayscale(1);\n						background-color: rgba(178,182,184,0.33);\n						opacity: 0.66;\n						-webkit-transform: translate3d(0,0,0);\n				}\n				.filter:after{\n						display:block !important;\n						z-index: 2;\n						opacity: 1;\n				}\n"}else{string+="			.filter{						filter: url('#grad');\n						-webkit-filter: url('#grad');\n				}"}string+="\n</style>";$("head").append(string);var idleTimer;function idleTimeout(){if(Modernizr.cssfilters&&!$("body.home").length>0&&!$("body.slideshow").length>0){var idle=true;$(window).on("mousemove scrollstart",function(e){$(window).off("mousemove scrollstart");idle=false});idleTimer=window.setTimeout(function(){if(idle&&$("body.slideshow").length<1){applyFilter()}else{idleTimeout()}},6e3)}}function applyFilter(){window.clearTimeout(idleTimer);var $container=$("#container");var $filtered=$container.clone().addClass("filtered");$filtered.find(".content-wrapper").addClass("filter");if($container.length<2){$filtered.insertAfter($container);$container.addClass("unfiltered fade");$(window).one("mousemove scroll",function(e){$(window).off("mousemove scrollstart");$container.removeClass("fade").one(transitionEnd,function(){$(this).removeClass("unfiltered");$(".filtered").remove();idleTimeout()})})}}var firstimg=false;window.viewportUnitsBuggyfill.init();$(document).on("lazybeforeunveil",function(e){if(!firstimg){$(this).trigger("firstimg");firstimg=true}$(e.target).parents("figure").removeClass("loading")});activePage.locate(window.location.pathname,null);activePage.enter()});
//# sourceMappingURL=scripts.min.js.map